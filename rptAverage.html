<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="https://kit.fontawesome.com/49caa8d480.js" crossorigin="anonymous"></script>
    
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">

    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script src="/js/user.js" type="text/javascript"></script>
    <title>Average Purchase Prices</title>
  </head>
  <body>
    <main class="" id="main">
    <div class="container display-8">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="home.html"
            ><img src="/img/logo_nav_white.png" alt="ESM LOGO" width="120px"
            /></a>
            <label id="username">Username</label>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0"></ul>
            <form class="d-flex">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown ms-10">
                  <a
                    class="nav-link dropdown-toggle"
                    href="#"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fas fa-box-open"></i> &nbsp; Inventory
                  </a>
                  <ul class="dropdown-menu">
                    <li>
                      <a class="dropdown-item" href="orders.html"
                        ><i class="fas fa-file-signature"></i> &nbsp; Orders</a
                      >
                    </li>
                    <li><hr class="dropdown-divider" /></li>
                    <li>
                      <a class="dropdown-item" href="suppliers.html"
                        ><i class="fas fa-dolly"></i> &nbsp;Suppliers</a
                      >
                    </li>
                    <li>
                      <a class="dropdown-item" href="products.html"
                        ><i class="fas fa-tachometer-alt"></i> &nbsp;Products</a
                      >
                    </li>
                  </ul>
                </li>
                <li tabindex="2" class="nav-item  dropdown ms-10">
                  <a class="nav-link dropdown-toggle"role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="fas fa-tags"></i> &nbsp; Sales
                  </a>
                  <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="sales.html"><i class="fas fa-users"></i> &nbsp; Sales Record</a></li>
                      <li><a class="dropdown-item" href="pos.html"><i class="fas fa-users"></i> &nbsp; POS</a></li>
                  </ul>
              </li>
                <li class="nav-item dropdown ms-10">
                  <a
                    class="nav-link dropdown-toggle"
                    href="#"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fas fas fa-tools"></i> &nbsp; Maintenance
                  </a>
                  <ul class="dropdown-menu">
                    <li>
                      <a class="dropdown-item" href="employees.html"
                        ><i class="fas fa-users"></i> &nbsp; Employees</a
                      >
                    </li>
                    <li><hr class="dropdown-divider" /></li>
                    <li>
                      <a class="dropdown-item" href="customers.html"
                        ><i class="fas fa-user-alt"></i> &nbsp;Customers</a
                      >
                    </li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="reports.html"
                    ><i class="fas fas fa-chart-line"></i>&nbsp; Reports</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="index.html"
                    ><i class="fas fa-sign-out-alt"> </i>&nbsp;Logout</a
                  >
                </li>
              </ul>
            </form>
          </div>
        </div>
      </nav>
    </div>

    <div class="container pt-4">
      <nav aria-label="breadcrumb" class="breadcrumb d-flex justify-content-between">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="home.html">Home</a></li>
          <li class="breadcrumb-item active" aria-current="page">Reports</li>
        </ol>
        <!-- <li class="btn-link help-popover" rel="popover" data-placement="bottom" data-title="Help Center" data-html="true" data-content="#"> <a href="#" >Help Center </a></li> -->
        <li class="btn-link"  onclick="toggleSidebar()"><a href="#">Help</a></li>
      </nav>
      <div class="row">
        
      </div>

      <ul class="nav nav-tabs ">
        <li class="nav-item">
          <a class="nav-link " aria-current="page" href="reports.html">Curent Inventory Items  / on Order</a>
          
        </li>
        <li class="nav-item">
          <a class="nav-link" href="rptDiscontinued.html">Discontinued Inventory Items</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="rptAverage.html">Average Purchase Prices</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="rptSale.html" tabindex="-1" aria-disabled="true">Sales Report</a>
        </li>
      </ul>
      
      <div class="container p-4">
        <h3>Average Purchase Prices</h3>
        <hr>
        <div class="row">
          <div class="form-group col-sm">
            <label for="product" clas="bold">Product</label>
            <input type="text" class="form-control" id="product" placeholder="product or empty" required/>
          </div>
          <div class="form-group col-sm">
            <label for="dtFrom" clas="bold">Date From*</label>
            <input type="date" class="form-control" id="dtFrom" placeholder="" required/>
          </div>
          <div class="form-group col-sm">
            <label for="dtTo" clas="bold">Date To*</label>
            <input type="date" class="form-control" id="dtTo" placeholder="" required/>
          </div>
        </div><br>
        <div class="row">
          <div class="form-group col-sm">
            <a href="AveragedPurchasePrices.html" target="_explorer.exe" class="btn btn-primary" id="btnGenerate">Generate</a>
          </div>
        </div>
        <br>
        <div class="row">
            <div class="form-group col-sm">
              <label for="template" clas="bold">Save Template as</label>
              <input type="text" class="form-control" id="template" placeholder="Template Name" required/>
            </div>
        </div>
        <div class="row">
            
            <div class="form-group col-sm"><br>
              <a href="AveragedPurchasePrices.html" target="_explorer.exe" class="btn btn-primary" onclick="validate();" id="btnGenerateAndSave">Generate And Save</a>
            </div>
        </div>
      </div>
      <div class="container p-4">
        <div class="row">
          <div class="form-group col-sm">
            <label for="product" clas="bold">Select Template</label>
            <select name="month" id="month" class="form-control  form-select">
              <option value="0">SELECT Month / Year</option>
              <option value="AB">January - 2022</option>
              <option value="BC">February - 2022</option>
              <option value="MB">March - 2022</option>
              <option value="NB">April - 2022</option>
              <option value="NL">May - 2022</option>
              <option value="NS">June - 2022</option>
              <option value="NT">July - 2022</option>
              <option value="NU">August - 2022</option>
              <option value="ON">September - 2022</option>
              <option value="PE">October - 2022</option>
              <option value="QC">November - 2022</option>
          </select> 
          </div>
        </div><br>
        <div class="row">
          <div class="form-group col-sm">
            <a href="AveragedPurchasePrices.html" target="_explorer.exe" class="btn btn-primary">Generate</a>
          </div>
        </div>
      </div>
    </div>
  </main>
  <!-- SideBar Help -->
  <!-- <div class="sidebar-tab" id="sidebar-tab">
    <div class="vertical-text text-center" id="sidebar-tab-text" onclick="toggleSidebar()"><span class="arrow vertical-text"></span>CLICK TO VIEW HELP<span class="arrow vertical-text"></span></div>
  </div> -->
  <div class="sidebar" id="sidebar">
    <div class="container-liner">
      <h4>REPORTS Page</h4>
      <div>
        This is the <b>Average Purchase Prices</b> page where you can navigate by pointing and clicking your mouse or tabbing using your keyboard and enter key. </br></br> <b>PRODUCT</b> this is an autocomplete search field and you can type the characters of the item in this field. </br></br> <b>DATE FROM</b> this is a mandatory field where you can select the starting date from the popup calendar. </br></br> <b>DATE TO</b> this is a mandatory field where you can select the ending date from the popup calendar. </br></br> <b>SAVE TEMPLATE AS</b> you can enter the report template name in this field. </br></br> <b>SELECT TEMPLATE</b> you can select a specific saved template using the dropdown list. </br></br> <b>GENERATE</b> click this button to retrieve and display the report in another page.
      </div>
    </div>
  </div>

  </body>
</html>
<script>
  // sidebar Help
$(function(){
  $("#sidebar-tab-text").width($("#sidebar").height());
});
$( window ).resize(function() {
  $("#sidebar-tab-text").width($("#sidebar").height());
});
/* End of unsure centering */

//The only necessary piece of code
function toggleSidebar(){
  $("#sidebar").toggleClass("move-to-left");
  $("#sidebar-tab").toggleClass("move-to-left");
  $("main").toggleClass("move-to-left-partly");
  $(".arrow").toggleClass("active");
}

//helpcenter
$(document).ready(function() {
  $('.help-popover').popover({
    placement: 'bottom',
    title: 'REPORTS PAGE',
    html: true,
    content: "This is the <b>Average Purchase Prices</b> page where you can navigate by pointing and clicking your mouse or tabbing using your keyboard and enter key. </br></br> <b>PRODUCT</b> this is an autocomplete search field and you can type the characters of the item in this field. </br></br> <b>DATE FROM</b> this is a mandatory field where you can select the starting date from the popup calendar. </br></br> <b>DATE TO</b> this is a mandatory field where you can select the ending date from the popup calendar. </br></br> <b>SAVE TEMPLATE AS</b> you can enter the report template name in this field. </br></br> <b>SELECT TEMPLATE</b> you can select a specific saved template using the dropdown list. </br></br> <b>GENERATE</b> click this button to retrieve and display the report in another page."
  });
//   $(document).on("click", ".popover .close" , function(){
//         $(this).parents(".popover").popover('hide');
//     });
$( "#btnGenerate", "#btnGenerateAndSave" ).click(function() {
      var date1 = new Date($("#dtFrom").val());
      var date2 = new Date($("#dtTo").val());
      if(date1 > date2)
      {
          alert("fromdate should be less than todate");
          return false; 
      }
    });

function getProduct()
    {
        let sup = [];
        let productList = JSON.parse(localStorage.getItem("productList"));
        
        if(productList)
        {
            for (let i = 0; i < productList.length; i++)
            {
                temp = {
                            value: productList[i].productCode,
                            label: productList[i].description
                    }
                sup.push(temp);
            }
        } 
        return sup;
    }
    
    projects = getProduct();
    $( "#product" ).autocomplete({
        minLength: 0,
        source: projects,
        focus: function( event, ui ) {
            $( "#product" ).val( ui.item.label  );
                return false;
            },
        select: function( event, ui ) {
            $( "#product" ).val( ui.item.label  );
            $( "#OrderCode" ).val( ui.item.value );
        return false;
        }
    })
});

const loginUser = user.map(({ username }) => username);
  document.getElementById("username").innerHTML = "Hello " + loginUser + "!";

  function addOption() {
    let template = $('#template').val();
      $('#month').append(`<option value="${template}">
                                  ${template}
                            </option>`);
}
</script>
